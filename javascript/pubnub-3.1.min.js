function n(){return function(){}}
window.JSON&&window.JSON.stringify||function(){function u(c){x.lastIndex=0;return x.test(c)?'"'+c.replace(x,function(c){var d=B[c];return typeof d==="string"?d:"\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+c+'"'}function q(p,l){var d,k,i,r,s=c,h,f=l[p];f&&typeof f==="object"&&typeof f.toJSON==="function"&&(f=f.toJSON(p));typeof g==="function"&&(f=g.call(l,p,f));switch(typeof f){case "string":return u(f);case "number":return isFinite(f)?String(f):"null";case "boolean":case "null":return String(f);
case "object":if(!f)return"null";c+=j;h=[];if(Object.prototype.toString.apply(f)==="[object Array]"){r=f.length;for(d=0;d<r;d+=1)h[d]=q(d,f)||"null";i=h.length===0?"[]":c?"[\n"+c+h.join(",\n"+c)+"\n"+s+"]":"["+h.join(",")+"]";c=s;return i}if(g&&typeof g==="object"){r=g.length;for(d=0;d<r;d+=1)k=g[d],typeof k==="string"&&(i=q(k,f))&&h.push(u(k)+(c?": ":":")+i)}else for(k in f)Object.hasOwnProperty.call(f,k)&&(i=q(k,f))&&h.push(u(k)+(c?": ":":")+i);i=h.length===0?"{}":c?"{\n"+c+h.join(",\n"+c)+"\n"+
s+"}":"{"+h.join(",")+"}";c=s;return i}}window.JSON||(window.JSON={});if(typeof String.prototype.toJSON!=="function")String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()};var x=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c,j,B={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},g;typeof JSON.stringify!=="function"&&(JSON.stringify=function(p,
l,d){var k;j=c="";if(typeof d==="number")for(k=0;k<d;k+=1)j+=" ";else typeof d==="string"&&(j=d);if((g=l)&&typeof l!=="function"&&(typeof l!=="object"||typeof l.length!=="number"))throw Error("JSON.stringify");return q("",{"":p})});typeof JSON.parse!=="function"&&(JSON.parse=function(c){return eval("("+c+")")})}();
window.PUBNUB||function(){function u(a){var b={},e=a.publish_key||"demo",y=a.subscribe_key||"demo",o=a.ssl?"s":"",v="http"+o+"://"+(a.origin||"pubsub.pubnub.com"),m={history:function(a,b){var b=a.callback||b,e=a.limit||100,c=a.channel,d=h();if(!c)return j("Missing Channel");if(!b)return j("Missing Callback");t({c:d,url:[v,"history",y,f(c),d,e],b:function(a){b(a)},a:function(a){j(a)}})},time:function(a){var b=h();t({c:b,url:[v,"time",b],b:function(b){a(b[0])},a:function(){a(0)}})},uuid:function(a){var b=
h();t({c:b,url:["http"+o+"://pubnub-prod.appspot.com/uuid?callback="+b],b:function(b){a(b[0])},a:function(){a(0)}})},analytics:function(a){var b=h(),c=a.limit||100,d=a.ago||0,v=a.duration||100,g=a.callback;t({c:b,b:function(a){g(a)},a:function(){g(0)},url:[["http"+o+"://pubnub-prod.appspot.com/analytics-channel?callback="+b,"sub-key="+y,"pub-key="+e,"channel="+f(a.channel||""),"limit="+c,"ago="+d,"duration="+v].join("&")]})},publish:function(a,b){var b=b||a.callback||n(),c=a.message,d=a.channel,o=
h();if(!c)return j("Missing Message");if(!d)return j("Missing Channel");if(!e)return j("Missing Publish Key");c=JSON.stringify(c);c=[v,"publish",e,y,0,f(d),o,f(c)];if(c.join().length>1800)return j("Message Too Big");t({c:o,b:function(a){b(a)},a:function(){b([0,"Disconnected"])},url:c})},unsubscribe:function(a){a=a.channel;if(a in b)b[a].d=0,b[a].e&&b[a].e(0)},subscribe:function(a,e){function c(){var a=h();if(b[d].d)b[d].e=t({c:a,url:[v,"subscribe",y,f(d),a,o],a:function(){setTimeout(c,1E3);m.time(function(a){a||
k()})},b:function(a){b[d].d&&(i||(i=1,l()),o=a[1],setTimeout(c,10),g(a[0],function(a){e(a)}))}})}var d=a.channel,e=e||a.callback,o=0,k=a.error||n(),i=0,l=a.connect||n();if(!D)return I.push([a,e,m]);if(!d)return j("Missing Channel");if(!e)return j("Missing Callback");if(!y)return j("Missing Subscribe Key");d in b||(b[d]={});if(b[d].d)return j("Already Connected");b[d].d=1;c()},each:g,map:p,css:r,$:c,create:s,bind:d,supplant:l,head:k,search:B,attr:i,now:q,events:z,updater:x,init:u};return m}function q(){return"x"+
++M+""+ +new Date}function x(a,b){function e(){d+b>+new Date?(clearTimeout(c),c=setTimeout(e,b)):(d=+new Date,a())}var c,d=0;return e}function c(a){return document.getElementById(a)}function j(a){console.log(a)}function B(a,b){var e=[];g(a.split(/\s+/),function(a){g((b||document).getElementsByTagName(a),function(a){e.push(a)})});return e}function g(a,b){if(a&&b)if(typeof a[0]!="undefined")for(var e=0,c=a.length;e<c;)b.call(a[e],a[e],e++);else for(e in a)a.hasOwnProperty&&a.hasOwnProperty(e)&&b.call(a[e],
e,a[e])}function p(a,b){var e=[];g(a||[],function(a,c){e.push(b(a,c))});return e}function l(a,b){return a.replace(N,function(a,c){return b[c]||a})}function d(a,b,e){g(a.split(","),function(a){function c(a){if(!a)a=window.event;if(!e(a))a.cancelBubble=true,a.returnValue=false,a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation()}b.addEventListener?b.addEventListener(a,c,false):b.attachEvent?b.attachEvent("on"+a,c):b["on"+a]=c})}function k(){return B("head")[0]}function i(a,b,
c){if(c)a.setAttribute(b,c);else return a&&a.getAttribute&&a.getAttribute(b)}function r(a,b){for(var c in b)if(b.hasOwnProperty(c))try{a.style[c]=b[c]+("|width|height|top|left|".indexOf(c)>0&&typeof b[c]=="number"?"px":"")}catch(d){}}function s(a){return document.createElement(a)}function h(){return E||m()?0:q()}function f(a){return p(encodeURIComponent(a).split(""),function(a){return"-_.!~*'()".indexOf(a)<0?a:"%"+a.charCodeAt(0).toString(16).toUpperCase()}).join("")}function t(a){function b(a,b){if(!g)g=
1,a||l(b),e.onerror=null,clearTimeout(h),setTimeout(function(){a&&j();var b=c(f),e=b&&b.parentNode;e&&e.removeChild(b)},1E3)}if(E||m())return O(a);var e=s("script"),d=a.c,f=q(),g=0,h=setTimeout(function(){b(1)},F),j=a.a||n(),l=a.b||n();window[d]=function(a){b(0,a)};e[J]=J;e.onerror=function(){b(1)};e.src=a.url.join(K);i(e,"id",f);k().appendChild(e);return b}function O(a){function b(a){if(!f){f=1;clearTimeout(h);if(d)d.onerror=d.onload=null,d.abort&&d.abort(),d=null;a&&i()}}function c(){if(!g){g=1;
clearTimeout(h);try{response=JSON.parse(d.responseText)}catch(a){return b(1)}j(response)}}var d,f=0,g=0,h=setTimeout(function(){b(1)},F),i=a.a||n(),j=a.b||n();try{d=m()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest,d.onerror=function(){b(1)},d.onload=c,d.timeout=F,d.open("GET",a.url.join(K),true),d.send()}catch(k){return b(0),E=0,t(a)}return b}function G(){clearInterval(P);D||(D=1,g(I,function(a){a[2].subscribe(a[0],a[1])}))}function m(){if(!H.get)return 0;var a={id:m.id++,send:n(),
abort:function(){a.id={}},open:function(b,c){m[a.id]=a;H.get(a.id,c)}};return a}window.console||(window.console=window.console||{});console.log||(console.log=(window.opera||{}).postError||n());var M=1,N=/{([\w\-]+)}/g,J="async",K="/",F=14E4,A=navigator.userAgent,E=A.indexOf("MSIE 6")==-1,z={list:{},unbind:function(a){z.list[a]=[]},bind:function(a,b){(z.list[a]=z.list[a]||[]).push(b)},fire:function(a,b){g(z.list[a]||[],function(a){a(b)})}},w=c("pubnub")||{},D=0,I=[],C=u({publish_key:i(w,"pub-key"),
subscribe_key:i(w,"sub-key"),ssl:i(w,"ssl")=="on",origin:i(w,"origin")}),L=!location.href.indexOf("https")?"https://dh15atwfs066y.cloudfront.net/pubnub.swf":"http://cdn.pubnub.com/pubnub.swf";r(w,{position:"absolute",top:-1E3});A.indexOf("Firefox")>0||A.indexOf("MSIE 9")>0||A.indexOf("WebKit")>0||A.indexOf("MSIE 6")>0||(w.innerHTML="<object id=pubnubs type=application/x-shockwave-flash width=1 height=1 data="+L+"><param name=movie value="+L+" /><param name=allowscriptaccess value=always /></object>");
var H=c("pubnubs")||{},P=setInterval(function(){!("chrome"in window)&&H.get&&G()},100);d("load",window,function(){setTimeout(G,1E3)});C.rdx=function(a,b){if(!b)return m[a].onerror();m[a].responseText=unescape(b);m[a].onload()};m.id=1E3;window.jQuery&&(window.jQuery.PUBNUB=C);window.PUBNUB=C;typeof module!=="undefined"&&(module.f=C)&&G()}();
